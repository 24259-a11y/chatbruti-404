{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/chatbruti2/chatbruti/app/page.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"ctas\": \"page-module__nOQVua__ctas\",\n  \"intro\": \"page-module__nOQVua__intro\",\n  \"logo\": \"page-module__nOQVua__logo\",\n  \"main\": \"page-module__nOQVua__main\",\n  \"page\": \"page-module__nOQVua__page\",\n  \"primary\": \"page-module__nOQVua__primary\",\n  \"secondary\": \"page-module__nOQVua__secondary\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///home/ammarelmaghvery/chatbruti2/chatbruti/app/page.js"],"sourcesContent":["import Image from \"next/image\";\nimport styles from \"./page.module.css\";\n\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\n\nexport default function HomePage() {\n  const [messages, setMessages] = useState([\n    {\n      id: \"welcome\",\n      sender: \"bot\",\n      text: \"Salut, cr√©ature bip√®de üåö Je suis Chat‚Äôbruti, le chatbot le plus inutile de ta vie. Pose-moi une question s√©rieuse dans la langue que tu veux, je te promets une r√©ponse‚Ä¶ discutable.\"\n    }\n  ]);\n  const [input, setInput] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n    }\n  }, [messages, loading]);\n\n  async function handleSend() {\n    const trimmed = input.trim();\n    if (!trimmed || loading) return;\n\n    const userMessage = {\n      id: Date.now().toString(),\n      sender: \"user\",\n      text: trimmed\n    };\n\n    setMessages((prev) => [...prev, userMessage]);\n    setInput(\"\");\n    setLoading(true);\n    setErrorMsg(\"\");\n\n    try {\n      const res = await fetch(\"/api/chat\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          message: trimmed,\n          history: messages.map((m) => ({\n            role: m.sender === \"user\" ? \"user\" : \"assistant\",\n            content: m.text\n          }))\n        })\n      });\n\n      if (!res.ok) {\n        throw new Error(\"Erreur r√©seau\");\n      }\n\n      const data = await res.json();\n      const botText =\n        data && data.reply\n          ? data.reply\n          : \"Oups, mon cerveau en mousse a fondu. R√©essaie plus tard üß†üî•\";\n\n      const botMessage = {\n        id: Date.now().toString() + \"-bot\",\n        sender: \"bot\",\n        text: botText\n      };\n\n      setMessages((prev) => [...prev, botMessage]);\n    } catch (err) {\n      console.error(err);\n      setErrorMsg(\n        \"Je me suis pris les pieds dans le c√¢ble du serveur. Impossible de r√©pondre pour l‚Äôinstant.\"\n      );\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  function handleKeyDown(e) {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  }\n\n  return (\n    <div className=\"app-card\">\n      <header className=\"app-header\">\n        <div className=\"app-title-row\">\n          <h1 className=\"app-title\">\n            Chat‚Äôbruti\n            <span\n              style={{\n                fontSize: \"18px\",\n                display: \"inline-flex\",\n                marginLeft: \"2px\"\n              }}\n            >\n              üß†üí•\n            </span>\n          </h1>\n          <span className=\"app-pill\">Chatbot inutile & multilingue</span>\n        </div>\n        <p className=\"app-subtitle\">\n          Pose tes questions en fran√ßais, en arabe ou en anglais. Chat‚Äôbruti les\n          comprend tr√®s bien‚Ä¶ et r√©pond n‚Äôimporte comment, dans la m√™me langue\n          que toi.\n        </p>\n        <div className=\"app-warning\">\n          <span>‚ö†Ô∏è</span>\n          <span>\n            Ce chatbot est volontairement √† c√¥t√© de la plaque. Ne pas le prendre\n            au s√©rieux.\n          </span>\n        </div>\n      </header>\n\n      <section className=\"chat-container\">\n        <div className=\"chat-messages\">\n          {messages.length === 0 && (\n            <div className=\"chat-empty\">\n              Commence √† parler √† Chat‚Äôbruti‚Ä¶ il fera de son mieux pour mal\n              r√©pondre.\n            </div>\n          )}\n          {messages.map((msg) => (\n            <div\n              key={msg.id}\n              className={`message-row ${msg.sender === \"user\" ? \"user\" : \"bot\"}`}\n            >\n              <div className={`message-bubble ${msg.sender}`}>\n                <span className=\"message-meta\">\n                  {msg.sender === \"user\" ? \"TOI\" : \"CHAT‚ÄôBRUTI\"}\n                </span>\n                <span>{msg.text}</span>\n              </div>\n            </div>\n          ))}\n          {loading && (\n            <div className=\"message-row bot\">\n              <div className=\"message-bubble bot\">\n                <span className=\"message-meta\">CHAT‚ÄôBRUTI</span>\n                <span>\n                  Attends‚Ä¶ je cherche une mauvaise id√©e de r√©ponse ü§îüßÉ\n                </span>\n              </div>\n            </div>\n          )}\n          <div ref={messagesEndRef} />\n        </div>\n\n        <div className=\"chat-input-row\">\n          <textarea\n            className=\"chat-input\"\n            placeholder=\"√âcris ta question ici (fran√ßais, arabe ou anglais)‚Ä¶\"\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            onKeyDown={handleKeyDown}\n          />\n          <button\n            className=\"chat-send-button\"\n            onClick={handleSend}\n            disabled={loading || !input.trim()}\n          >\n            <span>{loading ? \"...\" : \"Envoyer\"}</span>\n          </button>\n        </div>\n\n        <div className=\"chat-footer\">\n          <span>üß† R√©ponses dans la m√™me langue que toi, mais rarement coh√©rentes.</span>\n          {errorMsg && <span style={{ color: \"#f97373\" }}>{errorMsg}</span>}\n        </div>\n      </section>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAGA;;;;AAFA;;AAIe,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,4OAAQ,EAAC;QACvC;YACE,IAAI;YACJ,QAAQ;YACR,MAAM;QACR;KACD;IACD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,4OAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,4OAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,4OAAQ,EAAC;IACzC,MAAM,iBAAiB,IAAA,0OAAM,EAAC;IAE9B,IAAA,6OAAS,EAAC;QACR,IAAI,eAAe,OAAO,EAAE;YAC1B,eAAe,OAAO,CAAC,cAAc,CAAC;gBAAE,UAAU;YAAS;QAC7D;IACF,GAAG;QAAC;QAAU;KAAQ;IAEtB,eAAe;QACb,MAAM,UAAU,MAAM,IAAI;QAC1B,IAAI,CAAC,WAAW,SAAS;QAEzB,MAAM,cAAc;YAClB,IAAI,KAAK,GAAG,GAAG,QAAQ;YACvB,QAAQ;YACR,MAAM;QACR;QAEA,YAAY,CAAC,OAAS;mBAAI;gBAAM;aAAY;QAC5C,SAAS;QACT,WAAW;QACX,YAAY;QAEZ,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,aAAa;gBACnC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,SAAS;oBACT,SAAS,SAAS,GAAG,CAAC,CAAC,IAAM,CAAC;4BAC5B,MAAM,EAAE,MAAM,KAAK,SAAS,SAAS;4BACrC,SAAS,EAAE,IAAI;wBACjB,CAAC;gBACH;YACF;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,MAAM,UACJ,QAAQ,KAAK,KAAK,GACd,KAAK,KAAK,GACV;YAEN,MAAM,aAAa;gBACjB,IAAI,KAAK,GAAG,GAAG,QAAQ,KAAK;gBAC5B,QAAQ;gBACR,MAAM;YACR;YAEA,YAAY,CAAC,OAAS;uBAAI;oBAAM;iBAAW;QAC7C,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,YACE;QAEJ,SAAU;YACR,WAAW;QACb;IACF;IAEA,SAAS,cAAc,CAAC;QACtB,IAAI,EAAE,GAAG,KAAK,WAAW,CAAC,EAAE,QAAQ,EAAE;YACpC,EAAE,cAAc;YAChB;QACF;IACF;IAEA,qBACE,yQAAC;QAAI,WAAU;;0BACb,yQAAC;gBAAO,WAAU;;kCAChB,yQAAC;wBAAI,WAAU;;0CACb,yQAAC;gCAAG,WAAU;;oCAAY;kDAExB,yQAAC;wCACC,OAAO;4CACL,UAAU;4CACV,SAAS;4CACT,YAAY;wCACd;kDACD;;;;;;;;;;;;0CAIH,yQAAC;gCAAK,WAAU;0CAAW;;;;;;;;;;;;kCAE7B,yQAAC;wBAAE,WAAU;kCAAe;;;;;;kCAK5B,yQAAC;wBAAI,WAAU;;0CACb,yQAAC;0CAAK;;;;;;0CACN,yQAAC;0CAAK;;;;;;;;;;;;;;;;;;0BAOV,yQAAC;gBAAQ,WAAU;;kCACjB,yQAAC;wBAAI,WAAU;;4BACZ,SAAS,MAAM,KAAK,mBACnB,yQAAC;gCAAI,WAAU;0CAAa;;;;;;4BAK7B,SAAS,GAAG,CAAC,CAAC,oBACb,yQAAC;oCAEC,WAAW,CAAC,YAAY,EAAE,IAAI,MAAM,KAAK,SAAS,SAAS,OAAO;8CAElE,cAAA,yQAAC;wCAAI,WAAW,CAAC,eAAe,EAAE,IAAI,MAAM,EAAE;;0DAC5C,yQAAC;gDAAK,WAAU;0DACb,IAAI,MAAM,KAAK,SAAS,QAAQ;;;;;;0DAEnC,yQAAC;0DAAM,IAAI,IAAI;;;;;;;;;;;;mCAPZ,IAAI,EAAE;;;;;4BAWd,yBACC,yQAAC;gCAAI,WAAU;0CACb,cAAA,yQAAC;oCAAI,WAAU;;sDACb,yQAAC;4CAAK,WAAU;sDAAe;;;;;;sDAC/B,yQAAC;sDAAK;;;;;;;;;;;;;;;;;0CAMZ,yQAAC;gCAAI,KAAK;;;;;;;;;;;;kCAGZ,yQAAC;wBAAI,WAAU;;0CACb,yQAAC;gCACC,WAAU;gCACV,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gCACxC,WAAW;;;;;;0CAEb,yQAAC;gCACC,WAAU;gCACV,SAAS;gCACT,UAAU,WAAW,CAAC,MAAM,IAAI;0CAEhC,cAAA,yQAAC;8CAAM,UAAU,QAAQ;;;;;;;;;;;;;;;;;kCAI7B,yQAAC;wBAAI,WAAU;;0CACb,yQAAC;0CAAK;;;;;;4BACL,0BAAY,yQAAC;gCAAK,OAAO;oCAAE,OAAO;gCAAU;0CAAI;;;;;;;;;;;;;;;;;;;;;;;;AAK3D"}}]
}