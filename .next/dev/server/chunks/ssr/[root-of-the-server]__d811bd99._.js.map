{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/ammarelmaghvery/chatbruti2/chatbruti/app/page.js"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Send, Info, X, Moon, Sun } from \"lucide-react\";\n\nexport default function HomePage() {\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [theme, setTheme] = useState(\"system\"); // 'light', 'dark', 'system'\n\n  const messagesEndRef = useRef(null);\n  const textareaRef = useRef(null);\n\n  // Initialize welcome message on client side only to avoid hydration mismatch\n  useEffect(() => {\n    setMessages([\n      {\n        id: \"welcome\",\n        sender: \"bot\",\n        text: \"üëã Salut ! Je m'appelle Chat'bruti, ton scientifique inutile mais charmant. Dis-moi, quel syst√®me d'exploitation tu utilises ? Windows, Mac, Linux... ou peut-√™tre une calculatrice ? ü§ìüíª\",\n        time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n      }\n    ]);\n  }, []);\n\n  // Initialize theme\n  useEffect(() => {\n    const savedTheme = localStorage.getItem(\"theme\");\n    if (savedTheme) {\n      setTheme(savedTheme);\n      document.documentElement.setAttribute(\"data-theme\", savedTheme);\n    } else {\n      const systemDark = window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\n      setTheme(systemDark ? \"dark\" : \"light\");\n      document.documentElement.setAttribute(\"data-theme\", systemDark ? \"dark\" : \"light\");\n    }\n\n    // Listen for system changes if no manual override\n    const mediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n    const handleChange = (e) => {\n      if (!localStorage.getItem(\"theme\")) {\n        const newTheme = e.matches ? \"dark\" : \"light\";\n        setTheme(newTheme);\n        document.documentElement.setAttribute(\"data-theme\", newTheme);\n      }\n    };\n    mediaQuery.addEventListener(\"change\", handleChange);\n    return () => mediaQuery.removeEventListener(\"change\", handleChange);\n  }, []);\n\n  function toggleTheme() {\n    const newTheme = theme === \"dark\" ? \"light\" : \"dark\";\n    setTheme(newTheme);\n    document.documentElement.setAttribute(\"data-theme\", newTheme);\n    localStorage.setItem(\"theme\", newTheme);\n  }\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages, loading]);\n\n  // Auto-resize textarea\n  useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = \"24px\";\n      textareaRef.current.style.height = `${Math.min(textareaRef.current.scrollHeight, 100)}px`;\n    }\n  }, [input]);\n\n  async function handleSend() {\n    const trimmed = input.trim();\n    if (!trimmed || loading) return;\n\n    const userMessage = {\n      id: Date.now().toString(),\n      sender: \"user\",\n      text: trimmed,\n      time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n    };\n\n    setMessages((prev) => [...prev, userMessage]);\n    setInput(\"\");\n    setLoading(true);\n\n    try {\n      const res = await fetch(\"/api/chat\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          message: trimmed,\n          history: messages.map((m) => ({\n            role: m.sender === \"user\" ? \"user\" : \"assistant\",\n            content: m.text\n          }))\n        })\n      });\n\n      const data = await res.json();\n      const botText = data.reply || \"Oups, bug cosmique. ‚òÑÔ∏è\";\n\n      const botMessage = {\n        id: Date.now().toString() + \"-bot\",\n        sender: \"bot\",\n        text: botText,\n        time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n      };\n\n      setMessages((prev) => [...prev, botMessage]);\n    } catch (err) {\n      console.error(err);\n      setMessages((prev) => [\n        ...prev,\n        {\n          id: \"error-\" + Date.now(),\n          sender: \"bot\",\n          text: \"Je suis cass√©. Revenez plus tard. ü§ï\",\n          time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n        }\n      ]);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  function handleKeyDown(e) {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  }\n\n  return (\n    <>\n      {/* Navbar */}\n      <nav className=\"navbar\">\n        <div className=\"navbar-content\">\n          <div className=\"brand\">\n            <img src=\"/brutus-logo.png\" alt=\"Brutus Logo\" className=\"logo-img\" />\n            <div>\n              <h1 className=\"title\">Chat'bruti</h1>\n              <p className=\"subtitle\">L'intelligence artificielle... artificielle</p>\n            </div>\n          </div>\n          <div className=\"navbar-actions\">\n            <button\n              className=\"icon-btn\"\n              onClick={toggleTheme}\n              title=\"Changer de th√®me\"\n            >\n              {theme === \"dark\" ? <Sun size={20} /> : <Moon size={20} />}\n            </button>\n            <button\n              className=\"icon-btn\"\n              onClick={() => setIsModalOpen(true)}\n              title=\"√Ä propos\"\n            >\n              <Info size={20} />\n            </button>\n          </div>\n        </div>\n      </nav>\n\n      <div className=\"app-shell\">\n        {/* Chat Card */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"glass-card\"\n        >\n          {/* Chat Area */}\n          <div className=\"chat-area\">\n            <AnimatePresence initial={false}>\n              {messages.map((msg) => (\n                <motion.div\n                  key={msg.id}\n                  initial={{ opacity: 0, y: 10, scale: 0.95 }}\n                  animate={{ opacity: 1, y: 0, scale: 1 }}\n                  className={`message-wrapper ${msg.sender}`}\n                >\n                  <div className={`message-bubble ${msg.sender}`}>\n                    {msg.text}\n                    <span className=\"message-time\">{msg.time}</span>\n                  </div>\n                </motion.div>\n              ))}\n            </AnimatePresence>\n\n            {loading && (\n              <motion.div\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                className=\"message-wrapper bot\"\n              >\n                <div className=\"message-bubble bot\">\n                  <div className=\"typing-dots\">\n                    <div className=\"dot\"></div>\n                    <div className=\"dot\"></div>\n                    <div className=\"dot\"></div>\n                  </div>\n                </div>\n              </motion.div>\n            )}\n            <div ref={messagesEndRef} />\n          </div>\n\n          {/* Input Area */}\n          <div className=\"input-area\">\n            <div className=\"input-container\">\n              <textarea\n                ref={textareaRef}\n                className=\"chat-input\"\n                placeholder=\"Dis quelque chose...\"\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                onKeyDown={handleKeyDown}\n                rows={1}\n              />\n              <button\n                className=\"send-btn\"\n                onClick={handleSend}\n                disabled={!input.trim() || loading}\n              >\n                <Send size={18} />\n              </button>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n\n      {/* Footer */}\n      <footer className=\"footer\">\n        <p className=\"footer-text\">\n          Fait avec ü§° pour la <strong>Nuit de l'Info 2025</strong>\n        </p>\n        <p className=\"footer-links\">\n          <a href=\"https://github.com/24259-a11y/chatbruti-404\" target=\"_blank\" rel=\"noopener noreferrer\">\n            GitHub\n          </a>\n          {\" ‚Ä¢ \"}\n          <a href=\"#\" onClick={(e) => { e.preventDefault(); setIsModalOpen(true); }}>\n            √Ä propos\n          </a>\n        </p>\n      </footer>\n\n      {/* About Modal */}\n      <AnimatePresence>\n        {isModalOpen && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"modal-overlay\"\n            onClick={() => setIsModalOpen(false)}\n          >\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              className=\"modal-content\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <button className=\"modal-close\" onClick={() => setIsModalOpen(false)}>\n                <X size={20} />\n              </button>\n              <h2 className=\"modal-title\">√Ä propos de Chat'bruti</h2>\n              <p className=\"modal-text\">\n                Chat'bruti est un chatbot con√ßu pour la Nuit de l'Info.\n                Il est multilingue (Fran√ßais, Arabe, Anglais) mais surtout... inutile.\n                <br /><br />\n                Il ne faut pas prendre ses r√©ponses au s√©rieux. Il est l√† pour divertir,\n                raconter n'importe quoi, et parfois philosopher sur des sujets absurdes.\n                <br /><br />\n                <strong>Technologies :</strong> Next.js, Groq AI, Framer Motion.\n              </p>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}